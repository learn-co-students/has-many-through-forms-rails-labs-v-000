<h1><%=@post.title%></h1>
<p><%=@post.content%></p>

<h2>Categories</h2>
<ul>
  <%@post.categories.each do |c|%>
  <li><%=c.name%></li>
  <%end%>
</ul>

<h2>All Comments</h2>
<ul>
  <%@post.comments.each do |comment|%>
  <li><%= comment.user.username%> says: <%= comment.content%></li>
  <%end%>
</ul>

<h2>All users with comments</h2>
<ul>
  <%@post.users.uniq.each do |user|%>
  <li><%= link_to user.username, user_path(user)%></li>
  <%end%>
</ul>

<h2>Complete a new comment:</h2>
<%=form_for @comment do |f|%>
<%= f.label :content %>
<%= f.text_area :content %><br>
<%= f.hidden_field :post_id, :value => @post.id %> <!--post has many categories, this category is on the post's page, so needs post id to identify-->

<h3>Select from current users:</h3>
<%=f.label :user_id%>
<%= f.collection_select :user_id, User.all, :id, :username, input_blank: "New User"%>

<h3>Create a new user: </h3>
<%= f.fields_for :user_attributes do |u| %>
<%=f.label :username%>
  <%= u.text_field :username %><br>
  <% end %>
<%=f.submit%>
<%end%>
